# Singularity Hotel - Веб-приложение

## О проекте

Singularity Hotel - это веб-приложение для управления воображаемым отелем. Разработанное с использованием FastAPI и SQLAlchemy, оно предоставляет бэкенд API для управления отелями, номерами, пользователями, бронированиями и многим другим, используя SQL-базу данных. Этот проект демонстрирует надежный фундамент для системы управления отелем, предлагая такие функции, как аутентификация пользователей, контроль доступа на основе ролей и комплексное управление данными для гостиничных операций.

## Ключевые особенности

*   **Управление отелями:** Создание, просмотр и управление информацией об отелях, включая название, адрес, телефон и бюджет.
*   **Управление номерами:** Добавление и управление номерами в отелях, с указанием типа номера и цены.
*   **Управление пользователями:**
    *   Создание и управление учетными записями пользователей с различными ролями (администратор и, возможно, гости).
    *   Аутентификация пользователей с использованием JWT (JSON Web Tokens) для безопасного доступа.
    *   Контроль доступа на основе ролей администратора для конфиденциальных операций, таких как обновление пользователей и создание постов.
*   **Управление постами:** Создание и получение записей в блоге или объявлений в приложении (возможно, для новостей отеля или обновлений).
*   **Базовая аутентификация и авторизация:** Использует JWT для аутентификации пользователей и проверки ролей (администратор) для авторизации на определенных эндпоинтах.
*   **Интеграция с SQL базой данных:** Использует SQLAlchemy для взаимодействия с базой данных, в настоящее время настроена на SQLite для простоты.
*   **HTML шаблонизация:** Использует шаблоны Jinja2 для рендеринга динамических HTML-ответов (например, профиль пользователя).

## Используемые технологии

*   **FastAPI:**  Современный, быстрый (высокопроизводительный) веб-фреймворк для создания API на Python.
*   **SQLAlchemy:**  Мощный Python SQL toolkit и Object-Relational Mapper (ORM) для взаимодействия с базами данных.
*   **SQLite:**  Легковесная, файловая SQL база данных (конфигурация по умолчанию).
*   **Jinja2:**  Современный и удобный для дизайнеров язык шаблонов для Python, используемый для рендеринга HTML.
*   **Python:** Основной язык программирования для бэкенд-приложения.
*   **JWT (JSON Web Tokens):** Для аутентификации и авторизации пользователей.
*   **Uvicorn:** ASGI сервер для запуска приложения FastAPI.
*   **Passlib:** Для хеширования паролей (упоминается в `crud.py`, хотя и не полностью реализован в основном приложении).

## Инструкция по установке

1.  **Клонируйте репозиторий:**
    ```bash
    git clone <repository_url>
    cd Singularity-Hotel
    ```

2.  **Создайте виртуальное окружение (рекомендуется):**
    ```bash
    python -m venv venv
    source venv/bin/activate  # В Linux/macOS
    venv\Scripts\activate  # В Windows
    ```

3.  **Установите зависимости:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **Установите переменные окружения:**
    Вам нужно установить переменные окружения `JWT_SECRET` и `JWT_ALGORITHM`. Для разработки вы можете добавить их в свой файл `.env` или установить непосредственно в терминале.
    ```bash
    export JWT_SECRET="your-secret-key"
    export JWT_ALGORITHM="HS256"
    ```
    *(Замените `"your-secret-key"` на надежный секретный ключ)*

5.  **Запустите приложение:**
    ```bash
    uvicorn main:app --reload
    ```
    *(Предполагается, что `main.py` находится в корневом каталоге. Если `main.py` находится внутри каталога `Singularity-Hotel`, вам может потребоваться скорректировать команду)*

    Приложение будет доступно по адресу `http://127.0.0.1:8000` по умолчанию.

## API Эндпоинты

Краткий обзор доступных API эндпоинтов:

*   **Тестовый эндпоинт:**
    *   `GET /`:  Простой эндпоинт приветствия для проверки работоспособности API.

*   **Эндпоинты пользователей:**
    *   `POST /user/signup`:  Регистрирует нового пользователя.
    *   `POST /user/login`:  Авторизует пользователя и возвращает JWT токен.
    *   `GET /users/{user_id}`:  Получает информацию о пользователе по ID.
    *   `PUT /users/{user_id}`:  Обновляет информацию о пользователе (требуется доступ администратора).
    *   `DELETE /users/{user_id}`:  Удаляет пользователя (требуется доступ администратора).
    *   `POST /create/user/`: Создает нового пользователя.
    *   `GET /users/`: Показывает детали пользователя (функциональность эндпоинта может требовать уточнения).

*   **Эндпоинты отелей:**
    *   `POST /create/hotel/`:  Создает новый отель.
    *   `GET /hotel/{hotel_id}`:  Получает информацию об отеле по ID.

*   **Эндпоинты номеров:**
    *   `POST /create/room/`:  Создает новый номер.

*   **Эндпоинты постов:**
    *   `GET /posts`:  Получает все посты.
    *   `GET /posts/{post_id}`:  Получает конкретный пост по ID.
    *   `POST /create/post`:  Создает новый пост (требуется доступ администратора).

## База данных

В настоящее время приложение настроено на использование базы данных SQLite (`sql_app.db`), расположенной в корневом каталоге. SQLAlchemy используется в качестве ORM для взаимодействия с базой данных. Вы можете легко переключиться на другие SQL базы данных, такие как PostgreSQL или MySQL, изменив `SQLALCHEMY_DATABASE_URL` в `app/sql/database.py`.

## Аутентификация и авторизация

*   **JWT Аутентификация:** Аутентификация пользователей обрабатывается с использованием JWT. При успешном входе в систему выдается JWT токен. Этот токен необходимо включать в заголовок `Authorization` в качестве Bearer токена для доступа к защищенным эндпоинтам.
*   **Контроль доступа на основе ролей администратора:** Определенные эндпоинты, такие как `/users/{user_id}` (PUT, DELETE) и `/create/post`, защищены и требуют прав администратора. Это обеспечивается с помощью зависимости `is_admin`.

## HTML Шаблоны

Шаблоны Jinja2 используются для рендеринга HTML-ответов для таких эндпоинтов, как `/users/{user_id}` и `/hotel/{hotel_id}`. Шаблоны расположены в каталоге `templates`.

## Будущие улучшения

*   **Управление гостями:** Реализовать полные функции управления гостями, включая создание, получение и обновление информации о гостях.
*   **Система бронирования:** Разработать полноценную систему бронирования, позволяющую пользователям бронировать номера, управлять бронированиями и обрабатывать отмены.
*   **Интеграция платежей:** Интегрировать платежные шлюзы для обработки онлайн-платежей за бронирования.
*   **Панель администратора:** Создать специальную панель администратора для более удобного управления пользователями, отелями, номерами и другими аспектами отеля.
*   **Улучшенный пользовательский интерфейс:** Разработать более полный пользовательский интерфейс, возможно, с использованием фронтенд-фреймворка, такого как React или Vue.js, для взаимодействия с бэкенд API.
*   **Более надежная безопасность:** Реализовать хеширование паролей при создании пользователей и усилить меры безопасности.
*   **Полная документация API:** Сгенерировать надлежащую документацию API с использованием таких инструментов, как Swagger или ReDoc.

---

**Отказ от ответственности:** Этот README создан на основе предоставленного кода и может потребовать корректировки по мере развития проекта. Пожалуйста, обращайтесь к коду и комментариям для получения самой актуальной информации.
